.controls {
    margin-bottom: 30px;
    display: flex;
    align-items: center;
    gap: 15px;
}

.controls label {
    font-size: 1.1em;
    color: #555;
}

.controls select { /* 追加 */
    padding: 10px;
    font-size: 1.1em;
    border: 1px solid #ccc;
    border-radius: 5px;
    background-color: white;
    cursor: pointer;
}

.controls input[type="number"] {
    padding: 10px;
    font-size: 1.1em;
    border: 1px solid #ccc;
    border-radius: 5px;
    width: 80px;
    text-align: center;
}

button {
    padding: 15px 30px;
    font-size: 1.2em;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

button:hover {
    background-color: #0056b3;
}

/* 以下は変更なし */
#cardDisplayArea {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 40px;
    min-height: 200px;
    width: 90%;
    max-width: 1200px;
    padding: 20px;
}

.pack-container {
    border: 2px solid #a0a0a0;
    border-radius: 10px;
    padding: 20px;
    background-color: #ffffff;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    width: 100%;
    max-width: 1000px;
    text-align: center;
}

.pack-cards {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 20px;
    margin-top: 20px;
}

.pack-title {
    font-size: 1.5em;
    color: #444;
    margin-bottom: 15px;
    border-bottom: 1px solid #ddd;
    padding-bottom: 10px;
}

.card {
    border: 1px solid #ccc;
    border-radius: 8px;
    padding: 10px;
    background-color: #f9f9f9;
    box-shadow: 2px 2px 8px rgba(0,0,0,0.1);
    text-align: center;
    width: 200px;
    flex-shrink: 0;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.card img {
    max-width: 100%;
    height: auto;
    border-radius: 4px;
    margin-bottom: 5px;
}

.card-name {
    font-weight: bold;
    color: #333;
    margin-bottom: 5px;
    font-size: 1.1em;
}

.card-product,
.card-type,
.card-number {
    font-size: 0.85em;
    color: #666;
    margin-bottom: 3px;
}

.card-effect {
    font-size: 0.8em;
    color: #444;
    text-align: left;
    margin-top: 10px;
    border-top: 1px dashed #eee;
    padding-top: 10px;
    white-space: pre-wrap;
    word-break: break-word;
}

.card {
    /* 既存のスタイル */
    position: relative; /* レアリティバッジを配置するために必要 */
}

.card-rarity { /* レアリティ表示用のスタイル */
    position: absolute;
    top: 5px;
    left: 5px;
    background-color: #000000cc; /* 半透明の黒背景 */
    color: white;
    padding: 3px 8px;
    border-radius: 5px;
    font-size: 0.75em;
    font-weight: bold;
    z-index: 10; /* 他の要素より手前に */
}

/* レアリティごとの色分け (例) */
.rarity-N { background-color: #888; }
.rarity-R { background-color: #007bff; }
.rarity-P { background-color: #ffc107; color: #333; } 
.rarity-L { background-color: #dc3545; }
.rarity-R2 { background-color: #e67e22; } 
.rarity-PE { background-color: #e67e22; } 
.rarity-P2 { background-color: #e67e22; } 
.rarity-PE2 { background-color: #e67e22; } 
.rarity-SEC { background-color: #fff5ed; } 
.rarity-LLE { background-color: #9b59b6; } 
/* 必要に応じてレアリティのクラスを追加 */

.share-area {
    margin-top: 30px;
    margin-bottom: 50px; /* 下にスペース */
}

#tweetResultButton {
    background-color: #1DA1F2; /* Xのブランドカラー */
    padding: 15px 30px;
    font-size: 1.2em;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

#tweetResultButton:hover {
    background-color: #0c85d0;
}

/* 以下は既存のスタイル */
body {
    font-family: sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-top: 50px;
    background-color: #f0f0f0;
}

.history-area {
    margin-top: 50px;
    width: 90%;
    max-width: 1000px;
    background-color: #ffffff;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    text-align: center;
}

.history-area h2 {
    color: #333;
    margin-bottom: 20px;
}

#clearHistoryButton {
    background-color: #dc3545; /* 赤色 */
    padding: 10px 20px;
    font-size: 1em;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s ease;
    margin-bottom: 20px;
}

#clearHistoryButton:hover {
    background-color: #c82333;
}

.history-item {
    border: 1px solid #ddd;
    border-radius: 8px;
    margin-bottom: 15px;
    padding: 15px;
    background-color: #f9f9f9;
    text-align: left;
}

.history-item h3 {
    color: #555;
    margin-top: 0;
    margin-bottom: 10px;
    font-size: 1.1em;
}

.history-item .history-cards {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    justify-content: center; /* カードを中央揃え */
    margin-top: 10px;
}

.history-item .history-card {
    border: 1px solid #eee;
    padding: 5px;
    border-radius: 5px;
    font-size: 0.8em;
    width: 120px; /* 履歴表示用のカード幅を小さく */
    text-align: center;
    overflow: hidden; /* はみ出したテキストを隠す */
    text-overflow: ellipsis; /* 省略記号 */
    white-space: nowrap; /* 強制的に1行に */
    background-color: #fff;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    position: relative;
    padding-top: 25px; /* レアリティバッジのスペース */
}

.history-card .card-rarity { /* 履歴カード内のレアリティバッジ */
    position: absolute;
    top: 2px;
    left: 2px;
    padding: 2px 5px;
    font-size: 0.6em;
    border-radius: 3px;
    background-color: #000000cc; /* デフォルトの色 */
    color: white;
}

/* 履歴カードのレアリティごとの色 */
.history-card.rarity-N { background-color: #eee; }
.history-card.rarity-R { background-color: #ffe0b2; } /* 薄いオレンジ */
.history-card.rarity-P { background-color: #ccffcc; } /* 薄い緑 */
.history-card.rarity-L { background-color: #b2e0ff; } /* 薄い青 */
.history-card.rarity-R＋ { background-color: #ffd9b3; }
.history-card.rarity-PE { background-color: #b3e0ff; }
.history-card.rarity-P＋ { background-color: #99ff99; }
.history-card.rarity-PE＋ { background-color: #80c8ff; }
.history-card.rarity-SEC { background-color: #ffcccc; } /* 薄い赤 */
.history-card.rarity-SECE { background-color: #ffb3b3; }
.history-card.rarity-LLE { background-color: #e0b3ff; } /* 薄い紫 */


.history-card img {
    max-width: 100%;
    height: auto;
    border-radius: 3px;
    margin-bottom: 5px;
}

/* 省略（以前のCSSに続けて追加してください） */

/* ▼▼▼ ここから追加 ▼▼▼ */
.collection-area {
    margin-top: 50px;
    width: 90%;
    max-width: 1000px;
    background-color: #ffffff;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    text-align: center;
}

.collection-area h2 {
    color: #333;
    margin-bottom: 20px;
}

#completionRates {
    margin-bottom: 20px;
    padding: 15px;
    border: 1px solid #ddd;
    border-radius: 8px;
    background-color: #f0f8ff;
}

#completionRates p {
    font-size: 1.1em;
    font-weight: bold;
    margin: 5px 0;
}

#productCompletionRates {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 10px;
    margin-top: 10px;
    font-size: 0.9em;
}

#cardCollectionDisplayArea {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    justify-content: center;
    margin-top: 20px;
    border-top: 1px dashed #ccc;
    padding-top: 20px;
}

.collection-card {
    border: 1px solid #ccc;
    border-radius: 8px;
    padding: 10px;
    width: 150px; /* カード図鑑内のカードサイズ */
    text-align: center;
    background-color: #fefefe;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08);
    position: relative;
    overflow: hidden;
    padding-top: 30px; /* レアリティバッジと所持枚数のスペース */
    min-height: 200px; /* カード図鑑のカードの最小高さ */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
}

.collection-card img {
    max-width: 100%;
    height: auto;
    border-radius: 5px;
    margin-bottom: 5px;
}

.collection-card .card-name {
    font-size: 0.9em;
    font-weight: bold;
    color: #333;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    width: 100%; /* 親要素の幅に合わせて ellipsis を機能させる */
}

.collection-card .card-number {
    font-size: 0.8em;
    color: #666;
    margin-bottom: 5px;
}

.collection-card .card-rarity {
    position: absolute;
    top: 5px;
    left: 5px;
    padding: 3px 7px;
    font-size: 0.7em;
    border-radius: 4px;
    background-color: #000000cc;
    color: white;
    font-weight: bold;
    z-index: 10; /* 他の要素の上に表示 */
}

.collection-card .owned-count {
    position: absolute;
    top: 5px;
    right: 5px;
    padding: 3px 7px;
    font-size: 0.7em;
    border-radius: 4px;
    background-color: #28a745; /* 緑色 */
    color: white;
    font-weight: bold;
    z-index: 10;
}

/* 所持していないカードのスタイル */
.collection-card.not-owned {
    opacity: 0.5; /* 薄く表示 */
    filter: grayscale(100%); /* グレースケール */
}

/* レアリティごとの色（所持カードリスト用） */
.collection-card.rarity-N { border-color: #ddd; background-color: #fcfcfc; }
.collection-card.rarity-R { border-color: #ffc107; background-color: #fff9e6; }
.collection-card.rarity-P { border-color: #28a745; background-color: #e8f9ed; }
.collection-card.rarity-L { border-color: #007bff; background-color: #e6f2ff; }
.collection-card.rarity-R＋ { border-color: #fd7e14; background-color: #fff4ec; }
.collection-card.rarity-PE { border-color: #6c757d; background-color: #f8f9fa; }
.collection-card.rarity-P＋ { border-color: #20c997; background-color: #e6f9f5; }
.collection-card.rarity-PE＋ { border-color: #6610f2; background-color: #f2ebfc; }
.collection-card.rarity-SEC { border-color: #dc3545; background-color: #ffebeb; }
.collection-card.rarity-SECE { border-color: #e83e8c; background-color: #ffeaf3; }
.collection-card.rarity-LLE { border-color: #6f42c1; background-color: #f3e9fb; }


/* 新しいカード画像表示用のスタイル */
.card-image-wrapper {
    width: 150px; /* カード画像の幅を調整 */
    height: 210px; /* カード画像の高さを調整 (縦横比に合わせて調整してください) */
    background-size: contain; /* 画像を枠に収める */
    background-repeat: no-repeat;
    background-position: center;
    margin: 0 auto 5px; /* 中央揃えと下マージン */
    /* 必要に応じてボーダーやシャドウを追加 */
}
.collection-card .card-image-wrapper {
     width: 100px; /* コレクションのカード画像を少し小さく */
     height: 140px; /* コレクションのカード画像を少し小さく */
}